{"version":3,"sources":["webpack:///./src/views/Learn.vue?0d8a","webpack:///./src/views/Learn.vue?d2ce","webpack:///./src/components/learn/Learn.vue?0aac","webpack:///./src/components/learn/Rating.vue?b84b","webpack:///./src/components/learn/Rating.vue","webpack:///./src/components/learn/Rating.vue?d1f3","webpack:///./src/components/learn/Rating.vue?fb99","webpack:///./src/helpers/learningSessionManager.ts","webpack:///./src/helpers/followUpLearningSessionManager.ts","webpack:///./src/helpers/finishLearningDialogHelper.ts","webpack:///./src/components/learn/Learn.vue","webpack:///./src/components/learn/Learn.vue?1110","webpack:///./src/components/learn/Learn.vue?9625","webpack:///./src/views/Learn.vue","webpack:///./src/views/Learn.vue?5360","webpack:///./src/views/Learn.vue?7c4f","webpack:///./src/components/learn/Learn.vue?e37c","webpack:///./src/components/learn/Rating.vue?dafd"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","decks","numberOfSelectedDecks","learningSession","staticRenderFns","_v","_s","curLearningElement","card","q","a","on","revealAnswer","ref","numberOfStarsInRating","onRating","_e","learningSessionManager","currentElementIndex","moveToPrev","buttonNext","color","moveToNext","text","_l","n","key","class","numberOfStars","numberOfSelectedStar","$event","onClickStar","RatingProps","extend","props","Number","$emit","component","today","Date","getTime","getCardWeigthBasedOnRecentRatings","weight","defaultWeightForUnusedCards","undefined","r","length","mostRecentCardRating","reduce","mostRecentRatingObj","curRatingObj","t","daysSinceLastRating","virtualRating","Math","max","selectedDecks","numberOfRecentCardsToIgnoreWhenSelectingNextCard","cardsToSelectFrom","forEach","deck","cards","push","deckId","id","cardId","showAnswer","rating","elements","injectNewCard","randomCardIndex","getRandomCardIndex","ruleRating","splice","indexOfCardToBePossiblyUsedAgainForSelection","cardToBeUsedAgainForSelection","sumWeights","sum","randomNumberInWeightSumRange","random","curWeightSum","index","floor","currentLearningSessionElement","find","didOverwriteOldRating","oldRating","oldRatingObject","Array","isArray","Boolean","data","finishLearningDialog","context","bars","options","title","message","barChart","buttons","name","callback","$eventHub","QUIT_LEARNING","NO_MORE_CARDS","SHOW_CUSTOM_DIALOG","LearnProps","type","$on","SWIPE_LEFT_IN_LEARN","SWIPE_RIGHT_IN_LEARN","getCurrentLearningSessionElementWithCardDetails","updateRatingForCurrentLearningElement","mapRatingFrom100ToStars","$nextTick","$refs","setRating","learningSessionManagerDataInLocalStorage","$router","replace","filter","selected","updateCurLearningElement","checkIfCardIsEndOfSession","finishSession","moveToNextLearningSessionElement","moveToPrevLearningSessionElement","revealAnswerForCurrentLearningSessionElement","programmatically","mapRatingFromStarsTo100","saveRatingForCurrentLearningSessionElement","getBarsForFinishLearningDialog","value","element","document","getElementsByClassName","el","scrollHeight","clientHeight","classList","remove","add","updateVerticalCentering","components","Rating","VBtn","VCardActions","VCard","VSpacer","Object","LearnComponent"],"mappings":"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","file":"js/chunk-09cd0ebd.1fd5c89d.js","sourcesContent":["import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Learn.vue?vue&type=style&index=0&id=012d0047&scoped=true&lang=css&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Learn.vue?vue&type=style&index=0&id=012d0047&scoped=true&lang=css&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"learn\"},[_c('LearnComponent',{attrs:{\"decks\":_vm.decks,\"numberOfSelectedDecks\":_vm.numberOfSelectedDecks,\"learningSession\":_vm.learningSession}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.numberOfSelectedDecks>0)?_c('div',{staticClass:\"learn\"},[_c('div',{staticClass:\"max-height\"},[_vm._v(_vm._s(_vm.curLearningElement.card.q))]),_c('div',{staticClass:\"max-height\"},[(_vm.curLearningElement.showAnswer)?_c('span',[_vm._v(_vm._s(_vm.curLearningElement.card.a))]):_c('v-btn',{on:{\"click\":_vm.revealAnswer}},[_vm._v(\"Reveal Answer\")])],1),(_vm.curLearningElement.showAnswer)?_c('Rating',{ref:\"rating\",attrs:{\"numberOfStars\":_vm.numberOfStarsInRating},on:{\"rated\":_vm.onRating}}):_vm._e(),_c('v-card-actions',[_c('v-btn',{attrs:{\"text\":\"\",\"disabled\":_vm.learningSessionManager.learningSession.currentElementIndex === 0,\"color\":\"grey lighten-1\"},on:{\"click\":_vm.moveToPrev}},[_vm._v(\"Previous\")]),_c('v-spacer'),_c('v-btn',{attrs:{\"text\":\"\",\"color\":_vm.buttonNext.color},on:{\"click\":_vm.moveToNext}},[_vm._v(_vm._s(_vm.buttonNext.text))])],1)],1):_vm._e()}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"rating\"},_vm._l((_vm.numberOfStars),function(n){return _c('div',{key:n,staticClass:\"star-wrapper\"},[_c('span',{staticClass:\"overline grey--text text--darken-1\",class:{ 'invisible': (n !== 1 && n !== _vm.numberOfStars) }},[_vm._v(_vm._s(n === 1 ? \"Hard\" : \"Easy\"))]),_c('svg',{staticClass:\"star\",class:{ 'filled': (_vm.numberOfSelectedStar >= n) },attrs:{\"viewBox\":\"0 0 100 100\"}},[_c('polygon',{attrs:{\"points\":\"50,10 39.4,35.4 10.1,37 32.9,55.6 25.3,84 50,68, 74.7,84 67.1,55.6 89.9,37 60.6,35.4\"},on:{\"click\":function($event){return _vm.onClickStar(n)}}})])])}),0)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport Vue from \"vue\";\nimport Component from \"vue-class-component\";\n\nconst RatingProps = Vue.extend({\n  props: {\n    numberOfStars: Number\n  }\n});\n\n@Component\nexport default class Rating extends RatingProps {\n  numberOfSelectedStar = 0;\n  onClickStar(n: number) {\n    this.numberOfSelectedStar = n;\n    this.$emit(\"rated\", n);\n  }\n  setRating(n: number) {\n    this.numberOfSelectedStar = n;\n    this.$emit(\"rated\", n, true);\n  }\n}\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--14-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Rating.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--14-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Rating.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./Rating.vue?vue&type=template&id=9d3d01fc&scoped=true&\"\nimport script from \"./Rating.vue?vue&type=script&lang=ts&\"\nexport * from \"./Rating.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./Rating.vue?vue&type=style&index=0&id=9d3d01fc&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"9d3d01fc\",\n  null\n  \n)\n\nexport default component.exports","import { Card, Deck, LearningSession, LearningSessionElement } from \"@/types\";\n\n/* numberOfRecentCardsToIgnoreWhenSelectingNextCard defines when a card can be used again;\n * it's an object where the key defines the rating for which this rule applies and the value\n * says how many other cards need to be used before the card can be used again\n */\n\nconst today = new Date().getTime();\nfunction getCardWeigthBasedOnRecentRatings(card: Card): number {\n  const defaultWeightForUnusedCards = 80;\n  let weight;\n  if (card.r === undefined || card.r.length === 0) {\n    weight = defaultWeightForUnusedCards;\n  } else {\n    const mostRecentCardRating = card.r.reduce(\n      (mostRecentRatingObj, curRatingObj) =>\n        curRatingObj.t > mostRecentRatingObj.t\n          ? curRatingObj\n          : mostRecentRatingObj\n    );\n    // downgrade rating (0-100) by one for each day\n    const daysSinceLastRating =\n      (today - mostRecentCardRating.t) / (1000 * 60 * 60 * 24);\n    const virtualRating = mostRecentCardRating.r - daysSinceLastRating;\n    // map virtual rating to weight\n    weight = Math.max(0, 100 - virtualRating) || 1;\n  }\n  return weight;\n}\n\nexport default class LearningSessionManager {\n  decks = [] as Deck[];\n  numberOfRecentCardsToIgnoreWhenSelectingNextCard: {\n    [rating: number]: number;\n  } = {};\n  cardsToSelectFrom = [] as LearningSessionElement[];\n  learningSession = {} as LearningSession;\n\n  constructor(\n    selectedDecks: Deck[],\n    numberOfRecentCardsToIgnoreWhenSelectingNextCard: {\n      [rating: number]: number;\n    } = {}\n  ) {\n    this.decks = selectedDecks;\n    this.numberOfRecentCardsToIgnoreWhenSelectingNextCard = numberOfRecentCardsToIgnoreWhenSelectingNextCard;\n    this.cardsToSelectFrom = [];\n\n    this.decks.forEach((deck) => {\n      deck.cards.forEach((card) => {\n        this.cardsToSelectFrom.push({\n          deckId: deck.id,\n          cardId: card.id,\n          showAnswer: false,\n          rating: undefined,\n          card: undefined,\n          weight: getCardWeigthBasedOnRecentRatings(card),\n        });\n      });\n    });\n    this.learningSession = { elements: [], currentElementIndex: 0 };\n    this.injectNewCard();\n  }\n\n  injectNewCard(): boolean {\n    if (this.cardsToSelectFrom.length === 0) {\n      return false;\n    }\n    const randomCardIndex = this.getRandomCardIndex();\n    this.learningSession.elements.push(this.cardsToSelectFrom[randomCardIndex]);\n    this.cardsToSelectFrom.splice(randomCardIndex, 1);\n\n    for (const ruleRating in this\n      .numberOfRecentCardsToIgnoreWhenSelectingNextCard) {\n      const indexOfCardToBePossiblyUsedAgainForSelection =\n        this.learningSession.elements.length -\n        (this.numberOfRecentCardsToIgnoreWhenSelectingNextCard[\n          Number(ruleRating)\n        ] +\n          1);\n      if (indexOfCardToBePossiblyUsedAgainForSelection >= 0) {\n        const cardToBeUsedAgainForSelection = this.learningSession.elements[\n          indexOfCardToBePossiblyUsedAgainForSelection\n        ];\n        if (cardToBeUsedAgainForSelection.rating?.r === Number(ruleRating)) {\n          this.cardsToSelectFrom.push({\n            deckId: cardToBeUsedAgainForSelection.deckId,\n            cardId: cardToBeUsedAgainForSelection.cardId,\n          });\n        }\n      }\n    }\n    return true;\n  }\n\n  getRandomCardIndex(): number {\n    const sumWeights = this.cardsToSelectFrom.reduce(\n      (sum, card) => sum + (card.weight || 0),\n      0\n    );\n    const randomNumberInWeightSumRange = Math.random() * sumWeights;\n    let curWeightSum = 0;\n    for (let index = 0; index < this.cardsToSelectFrom.length; index++) {\n      curWeightSum += this.cardsToSelectFrom[index].weight || 0;\n      if (curWeightSum > randomNumberInWeightSumRange) {\n        return index;\n      }\n    }\n    // if random card selection based on some weighted distribution didn't work, assume even distribution\n    return Math.floor(Math.random() * this.cardsToSelectFrom.length);\n  }\n\n  getCurrentLearningSessionElementWithCardDetails(): LearningSessionElement {\n    const currentLearningSessionElement = this.learningSession.elements[\n      this.learningSession.currentElementIndex\n    ];\n    currentLearningSessionElement.card = this.decks\n      .find((deck) => deck.id === currentLearningSessionElement.deckId)\n      ?.cards.find((card) => card.id === currentLearningSessionElement.cardId);\n    return currentLearningSessionElement;\n  }\n\n  moveToNextLearningSessionElement(): void {\n    if (\n      this.learningSession.currentElementIndex ===\n      this.learningSession.elements.length - 1\n    ) {\n      if (!this.injectNewCard()) {\n        return;\n      }\n    }\n    this.learningSession.currentElementIndex++;\n  }\n\n  moveToPrevLearningSessionElement(): void {\n    if (this.learningSession.currentElementIndex > 0) {\n      this.learningSession.currentElementIndex--;\n    }\n  }\n\n  revealAnswerForCurrentLearningSessionElement(): void {\n    const currentLearningSessionElement = this.learningSession.elements[\n      this.learningSession.currentElementIndex\n    ];\n    currentLearningSessionElement.showAnswer = true;\n  }\n\n  saveRatingForCurrentLearningSessionElement(rating: number): boolean {\n    const currentLearningSessionElement = this.learningSession.elements[\n      this.learningSession.currentElementIndex\n    ];\n    const t = new Date().getTime();\n    let didOverwriteOldRating = false;\n    const deck = this.decks.find(\n      (deck) => deck.id === currentLearningSessionElement.deckId\n    );\n    const card = deck?.cards.find(\n      (card) => card.id === currentLearningSessionElement.cardId\n    );\n    if (currentLearningSessionElement.rating?.t) {\n      const oldRating = card?.r?.find(\n        (oldRatingObject) =>\n          oldRatingObject.t === currentLearningSessionElement.rating?.t\n      );\n      if (oldRating) {\n        oldRating.t = t;\n        oldRating.r = rating;\n        didOverwriteOldRating = true;\n      }\n    } else {\n      if (card) {\n        if (!Array.isArray(card?.r)) {\n          card.r = [];\n        }\n        card.r.push({ t, r: rating });\n      }\n    }\n    currentLearningSessionElement.rating = { t, r: rating };\n    return Boolean(didOverwriteOldRating);\n  }\n}\n","import LearningSessionManager from \"./learningSessionManager\";\n\nexport default class FollowUpLearningSessionManager extends LearningSessionManager {\n  constructor(data: LearningSessionManager) {\n    super(data.decks, data.numberOfRecentCardsToIgnoreWhenSelectingNextCard);\n    this.cardsToSelectFrom = data.cardsToSelectFrom;\n    this.learningSession = data.learningSession;\n  }\n}\n","import {\n  Event,\n  QuitLearningReason,\n  CustomDialogOptions,\n  CustomDialogOptionsBarChartBar,\n} from \"../types\";\n\nimport { clearLearningSessionManagerDataInLocalStorage } from \"./learningSessionStorageHelper\";\n\nexport function finishLearningDialog(\n  context: any,\n  bars: CustomDialogOptionsBarChartBar[]\n) {\n  const options = {\n    title: \"Finish Learning?\",\n    message:\n      \"You just finished your learning session. Do you want to finish and go to the deck selection?\",\n    barChart: {\n      bars,\n    },\n    buttons: [\n      {\n        name: \"Review Cards\",\n        color: \"grey\",\n      },\n      {\n        name: \"Finish\",\n        color: \"indigo\",\n        callback: () => {\n          context.$eventHub.$emit(\n            Event.QUIT_LEARNING,\n            QuitLearningReason.NO_MORE_CARDS\n          );\n          clearLearningSessionManagerDataInLocalStorage();\n        },\n      },\n    ],\n  } as CustomDialogOptions;\n  context.$eventHub.$emit(Event.SHOW_CUSTOM_DIALOG, options);\n}\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport Vue from \"vue\";\nimport Component from \"vue-class-component\";\n\nimport Rating from \"./Rating.vue\";\nimport {\n  Deck,\n  LearningSessionElement,\n  Event,\n  CustomDialogOptionsBarChartBar\n} from \"../../types\";\nimport LearningSessionManager from \"../../helpers/learningSessionManager\";\nimport FollowUpLearningSessionManager from \"../../helpers/followUpLearningSessionManager\";\n\nimport { finishLearningDialog } from \"../../helpers/finishLearningDialogHelper\";\nimport {\n  saveLearningSessionManagerDataToLocalStorage,\n  getLearningSessionManagerDataFromLocalStorage\n} from \"../../helpers/learningSessionStorageHelper\";\n\nconst LearnProps = Vue.extend({\n  props: {\n    decks: { type: Array as () => Deck[] },\n    numberOfSelectedDecks: Number\n  }\n});\n\n@Component({\n  components: {\n    Rating\n  }\n})\nexport default class Learn extends LearnProps {\n  numberOfStarsInRating = 5;\n  learningSessionManager = new LearningSessionManager([]);\n  curLearningElement = {\n    deckId: 0,\n    cardId: 0,\n    showAnswer: false,\n    rating: {},\n    card: {\n      id: 0,\n      q: \"\",\n      a: \"\"\n    }\n  } as LearningSessionElement;\n\n  $refs!: {\n    rating: Rating;\n  };\n\n  created() {\n    this.$eventHub.$on(Event.SWIPE_LEFT_IN_LEARN, () => {\n      this.moveToNext();\n    });\n    this.$eventHub.$on(Event.SWIPE_RIGHT_IN_LEARN, () => {\n      this.moveToPrev();\n    });\n  }\n\n  updateCurLearningElement() {\n    this.curLearningElement = this.learningSessionManager.getCurrentLearningSessionElementWithCardDetails();\n    this.updateRatingForCurrentLearningElement();\n    saveLearningSessionManagerDataToLocalStorage(this.learningSessionManager);\n  }\n\n  updateRatingForCurrentLearningElement() {\n    let r = 0;\n    if (this.curLearningElement.rating?.r !== undefined) {\n      r = this.mapRatingFrom100ToStars(this.curLearningElement.rating.r);\n    }\n    // rating component is not mounted yet due to re-rendering\n    this.$nextTick(() => {\n      if (this.$refs.rating) {\n        this.$refs.rating.setRating(r);\n      }\n    });\n  }\n\n  beforeMount() {\n    const learningSessionManagerDataInLocalStorage = getLearningSessionManagerDataFromLocalStorage();\n    if (learningSessionManagerDataInLocalStorage) {\n      this.learningSessionManager = new FollowUpLearningSessionManager(\n        learningSessionManagerDataInLocalStorage\n      );\n    } else {\n      if (this.numberOfSelectedDecks === 0) {\n        this.$router.replace(\"/\");\n        return;\n      }\n      this.learningSessionManager = new LearningSessionManager(\n        this.decks.filter(deck => deck.selected)\n      );\n    }\n    this.updateCurLearningElement();\n  }\n\n  checkIfCardIsEndOfSession(): boolean {\n    return (\n      this.learningSessionManager.learningSession.currentElementIndex ===\n        this.learningSessionManager.learningSession.elements.length - 1 &&\n      this.learningSessionManager.cardsToSelectFrom.length === 0\n    );\n  }\n\n  moveToNext() {\n    if (this.checkIfCardIsEndOfSession()) {\n      this.finishSession();\n    }\n    this.learningSessionManager.moveToNextLearningSessionElement();\n  }\n\n  get buttonNext(): { text: string; color: string } {\n    if (this.checkIfCardIsEndOfSession()) {\n      return {\n        text: \"Finish\",\n        color: \"indigo lighten-1\"\n      };\n    } else {\n      return {\n        text: \"Next\",\n        color: \"grey lighten-1\"\n      };\n    }\n  }\n\n  moveToPrev() {\n    this.learningSessionManager.moveToPrevLearningSessionElement();\n  }\n\n  revealAnswer() {\n    this.learningSessionManager.revealAnswerForCurrentLearningSessionElement();\n  }\n\n  onRating(rating: number, programmatically = false) {\n    if (programmatically) return;\n    const r = this.mapRatingFromStarsTo100(rating);\n    this.learningSessionManager.saveRatingForCurrentLearningSessionElement(r);\n    saveLearningSessionManagerDataToLocalStorage(this.learningSessionManager);\n  }\n\n  mapRatingFromStarsTo100(rating: number): number {\n    // map 1-n -> 0-100\n    return ((rating - 1) * 100) / (this.numberOfStarsInRating - 1);\n  }\n  mapRatingFrom100ToStars(rating: number): number {\n    // map 0-100 -> 1-n\n    return (rating * (this.numberOfStarsInRating - 1)) / 100 + 1;\n  }\n\n  finishSession() {\n    finishLearningDialog(this, this.getBarsForFinishLearningDialog());\n  }\n\n  getBarsForFinishLearningDialog(): CustomDialogOptionsBarChartBar[] {\n    const bars = [];\n    for (let rating = 1; rating <= this.numberOfStarsInRating; rating++) {\n      bars.push({ name: `${rating}`, value: 0 });\n    }\n    for (const element of this.learningSessionManager.learningSession\n      .elements) {\n      if (element.rating?.r !== undefined) {\n        bars[this.mapRatingFrom100ToStars(element.rating.r) - 1].value += 1;\n      }\n    }\n    return bars;\n  }\n\n  updateVerticalCentering() {\n    for (const el of document.getElementsByClassName(\"max-height\")) {\n      if (el.scrollHeight > el.clientHeight) {\n        el.classList.remove(\"flex-center\");\n      } else {\n        el.classList.add(\"flex-center\");\n      }\n    }\n  }\n  mounted() {\n    this.updateVerticalCentering();\n  }\n  updated() {\n    this.updateVerticalCentering();\n    this.updateCurLearningElement();\n  }\n}\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--14-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Learn.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--14-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Learn.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./Learn.vue?vue&type=template&id=28b49ab7&scoped=true&\"\nimport script from \"./Learn.vue?vue&type=script&lang=ts&\"\nexport * from \"./Learn.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./Learn.vue?vue&type=style&index=0&id=28b49ab7&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"28b49ab7\",\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VBtn } from 'vuetify/lib/components/VBtn';\nimport { VCardActions } from 'vuetify/lib/components/VCard';\nimport { VSpacer } from 'vuetify/lib/components/VGrid';\ninstallComponents(component, {VBtn,VCardActions,VSpacer})\n","\n\n\n\n\n\n\n\n\n\n\nimport Vue from \"vue\";\nimport Component from \"vue-class-component\";\n\nimport { Deck, LearningSession } from \"../types\";\n\nimport LearnComponent from \"../components/learn/Learn.vue\";\n\nconst LearnProps = Vue.extend({\n  props: {\n    decks: { type: Array as () => Deck[] },\n    learningSession: { type: Object as () => LearningSession },\n    numberOfSelectedDecks: Number\n  }\n});\n\n@Component({\n  components: {\n    LearnComponent\n  }\n})\nexport default class Learn extends LearnProps {}\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Learn.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Learn.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./Learn.vue?vue&type=template&id=012d0047&scoped=true&\"\nimport script from \"./Learn.vue?vue&type=script&lang=ts&\"\nexport * from \"./Learn.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./Learn.vue?vue&type=style&index=0&id=012d0047&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"012d0047\",\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Learn.vue?vue&type=style&index=0&id=28b49ab7&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Learn.vue?vue&type=style&index=0&id=28b49ab7&scoped=true&lang=css&\"","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Rating.vue?vue&type=style&index=0&id=9d3d01fc&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Rating.vue?vue&type=style&index=0&id=9d3d01fc&scoped=true&lang=css&\""],"sourceRoot":""}